<html>
<head>
<title>Gameutils.js: Using the CanvasResizer class to manage canvas size</title>
<link rel="stylesheet" type="text/css" href="assets/default.css">
<script src="../src/canvasresizer.js"></script>
<script>
'use strict';

var realCtx;
var resizer;
var pos = {x: 37.5, y: 37.5};

var frame = function() {
    // The resizer returns a wrapped canvas 2D context in FIXED_COORDINATE_SYSTEM mode.
    var ctx = realCtx;
    var resizerCtx = resizer.render();
    if (resizerCtx !== undefined) {
        ctx = resizerCtx;
    }
    ctx.fillStyle = '#fff';
    ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
    ctx.fillStyle = '#000';
    ctx.fillRect(Math.round(pos.x - 12.5), Math.round(pos.y - 12.5), 25, 25);
    requestAnimationFrame(frame);
};

var eventListener = function(event) {
    pos = resizer.getCanvasPosition(event);
};

var start = function() {
    var parent = document.getElementById('canvasContainer');
    resizer = new CanvasResizer({
        mode: CanvasResizer.Mode.FIXED_RESOLUTION,
        width: 320,
        height: 180,
        parentElement: parent
    });
    var canvas = resizer.getCanvas();
    realCtx = canvas.getContext('2d');
    canvas.addEventListener('click', eventListener);
    canvas.addEventListener('touchmove', eventListener);
    frame();
};
</script>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
</head>
<body onload="start()">
<h2>Using the CanvasResizer class to manage canvas size</h2>
<p>With the CanvasResizer, you can set the canvas size several ways:</p>
<ul>
<li>FIXED_RESOLUTION: Forces an integer scaling ratio like 2:1 or 3:1, perfect for pixel art based graphics.
Unfortunately pixel-perfect rendering of this mode is currently only possible in Chrome.</li>
<li>FIXED_RESOLUTION_INTERPOLATED: Fix the resolution of the canvas, but fill the screen by scaling it. This may result
in blurred graphics, but can be helpful in rapid prototyping.</li>
<li>FIXED_COORDINATE_SYSTEM: Simulate a fixed coordinate system by applying a transform to the canvas context. This is
in effect a better-quality version of FIXED_RESOLUTION_INTERPOLATED that works only with the 2D context.</li>
<li>FIXED_ASPECT_RATIO: Fill the screen with the canvas, but preserving aspect ratio.</li>
<li>DYNAMIC: Simply fill the screen with the canvas.</li>
</ul>
<p>With all of the modes, you can map touch and mouse events to the canvas coordinate space with a simple function call.</p>
<p>Try clicking or touching on the canvas, or resizing the browser window.</p>
<p>Compatibility: Chrome 41 (full), Firefox 36 (no pixelated rendering), IE 11 (no pixelated rendering).</p>
<div id="canvasContainer" style="width: 90%; height: 600px; background: #000; border: 3px solid #08d;"></div>
<p>
<input type="button" value="Set mode to FIXED_RESOLUTION"
    onclick="resizer.changeMode(CanvasResizer.Mode.FIXED_RESOLUTION)"></input>
<input type="button" value="Set mode to FIXED_RESOLUTION_INTERPOLATED"
    onclick="resizer.changeMode(CanvasResizer.Mode.FIXED_RESOLUTION_INTERPOLATED)"></input>
<input type="button" value="Set mode to FIXED_COORDINATE_SYSTEM"
    onclick="resizer.changeMode(CanvasResizer.Mode.FIXED_COORDINATE_SYSTEM)"></input>
<input type="button" value="Set mode to FIXED_ASPECT_RATIO"
    onclick="resizer.changeMode(CanvasResizer.Mode.FIXED_ASPECT_RATIO)"></input>
<input type="button" value="Set mode to DYNAMIC"
    onclick="resizer.changeMode(CanvasResizer.Mode.DYNAMIC)"></input>
</p>
</body>
</html>